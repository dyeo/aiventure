#:import Factory kivy.factory.Factory

<MenuPopup@Popup>:
	title: 'Menu'
	size_hint: (0.4,0.667)
	auto_dismiss: False
	BoxLayout:
		spacing: 4
		orientation: 'vertical'
		Button:
			text: 'Resume'
			on_release: root.dismiss()
		Button:
			text: 'Save Adventure'
			on_release: root.on_save()
		Button:
			text: 'Load Adventure'
			on_release: root.on_load()
		Button:
			text: 'Quit to Main Menu'
			on_release: root.on_quit()

<PlayScreen>:

	BoxLayout:
		orientation: 'vertical'
		padding: (4,4)
		spacing: 4

		ScrollView:
			id: scroll_input
			do_scroll_y: True

			Label:
				id: output
				text: ''
				size_hint_y: None
				text_size: self.width, None
				height: self.texture_size[1]

		BoxLayout:
			spacing: 4
			size_hint: (1, None)
			height: 96

			TextInput:
				do_scroll_y: True
				id: input
				text: ''

			Button:
				id: button_send
				text: 'Send'
				size_hint: (1.0/6.0, 1)
				on_release: root.on_send()

		GridLayout:
			id: group_bottom
			cols: 6
			spacing: 4
			size_hint: (1, None)
			height: 64

			Button:
				id: button_menu
				disabled: False
				text: 'Menu'
				on_release: Factory.MenuPopup().open()
			
			Button:
				id: button_context
				disabled: True
				text: 'Context'
				on_release: root.on_context()
			
			Button:
				id: button_alter
				disabled: True
				text: 'Alter'
				on_release: root.on_alter()
			
			Button:
				id: button_revert
				disabled: True
				text: 'Revert'
				on_release: root.on_revert()
							
			Button:
				id: button_retry
				disabled: True
				text: 'Retry'
				on_release: root.on_retry()
